---
layout: post
title: TWL-03 React 디자인
subtitle: React의 디자인에 대해서 설명한다.
categories: [TWL, React]
tags: [TWL, React, Design]
---

## 새로운 언어나 프레임워크 

언어나 프레임워크는 도구이기 때문에 목적에 따라 새로운 언어나 프레임워크를 사용하게 된다.
하지만 타 언어나 프레임워크를 쓰던 사람들은 자신의 스타일대로 새로운 언어나 프레임워크를 사용한다.
하지만 해당 언어나 프레임워크를 쓰던 사람이 그런 코드를 보면 **"이건 파이썬스럽지 않아"**, **"이건 go스럽지 않아"**
같은 말을 주로 한다. 

각 언어나 프레임워크 별로 디렉터리를 구성하는 방법, 코드를 작성하는 스타일이 다르기 때문에 
이런 부분은 새 언어를 배우면서 함께 터득해야한다.

굳이 새 언어나 프레임워크의 스타일대로 굳이 코드를 작성하지 않더라도 원하는 동작은 실행시킬 수 있지만
그 언어나 프레임워크 기능과 특징을 제대로 활용하지 못할 가능성이 크다. "~스럽다"는 것은 그 언어의 특징을 잘 살리도록
코드를 작성한다는 의미이기 때문이다. 보통 언어나 프레임워크스럽게 코드를 작성하면 성능이 좋거나 가독성이 좋아진다.
우리는 언어나 프레임워크를 사용할 때 그 언어나 프레임워크스럽게 코드를 작성하도록 노력해야한다.

## 언어나 프레임워크스럽게 

React는 자바스크립트로 프론트엔드를 만들 수 있도록 도와주는 라이브러리다. 하지만 CRA를 통해
SPA로 리액트 코드를 작성하게 되면서 거의 프레임워크처럼 다루게 된다.
주로 언어나 프레임워크를 사용할 때 스타일이 드러나는 것은 다음과 같다.

1. 디렉터리 구조
2. 상태 관리
3. 작성 스타일

디렉터리 구조는 생각보다 언어나 프레임워크의 스타일을 잘 드러낸다.
보통 개발하다보면 관심사 별로 파일이나 디렉터리를 분리하게 되는데 디렉터리 구조는 이 언어나 프레임워크에서 
어떻게 관심사를 분리해서 개발하는 지 쉽게 알 수 있다.

프로젝트를 개발하다 보면 서비스를 제공하기 위해 어떠한 상태가 저장되어야 할 필요성이 생긴다.
주로 대부분의 정보는 서버에 저장하고 화면에 보여줄 정보들만 프론트엔드에서 가지고 있는다.
이때 상태를 다루는 방법도 다양하다.

백엔드에서는 서버에서 캐싱을 위해 특정 메모리에 저장해두는 경우도 있고 전역 캐싱을 위해 레디스를 사용하기도 한다.
혹은 영구적인 저장이 필요하다면 데이터베이스에 저장한다.
만약 세션의 요청에 정보가 유지되어야 한다면 `context`에 상태를 저장해 실행되는 함수에 넘겨 모든 depth에서
접근할 수 있도록 만들기도 한다.

여기서 중요한 것은 각각의 사용 목적이 다르다는 것이다. 각 관리 방식을 다른 목적으로도 사용할 수 있지만
그렇게 되면 효율이 떨어진다. 예를 들어 캐싱을 위해 메모리가 아닌 데이터베이스에 저장하게 된다면 성능이 확연히 떨어지게 될 것이다.

작성 스타일은 그 언어만의 특색에 가까워 자주 사용하거나 관련 프로젝트를 진행하면서 습득하게 된다.
예를 들어 자바스크립트에서 `is_call && call()`은 `is_call`을 확인했을 때 값이 참일 때에만 컴파일러가
`&&`의 뒷 부분을 실행한다는 최적화를 이용해 if문을 생략한 코드이다.
이 코드는 다른 언어에서도 사용할 수 있지만 유독 자바스크립트에서 많이 보이는 스타일이다.
그리고 보통 이렇게 해결할 수 있는 코드를 다른 방법으로 해결하면 "어.. js스럽지않은데.."라는 말을
간혹 듣게 된다.
> 파이썬스러운 코드의 예제: `evens = [n for n in numbers if n % 2]`  
> for range와 if문으로 위 코드와 같은 동작을 하게 만들어 파이썬스럽지 않다는 말을 들어봤다.. 

## 리액트스럽게

이번 포스트에서는 디렉터리 구조와 리액트에서 상태관리를 다루는 `state`, `props`, `context`, 그리고
React의 안티패턴들을 다룰 예정이다. 

### 리액트의 디렉터리 구조

```
- src/
-   components/
```

리액트 프로젝트를 시작하기 위해 많은 개발자들이 CRA를 실행한다. 프로젝트 생성이 완료되면 또 다시 많은 개발자들이
`src` 폴더에 `components` 폴더를 기계적으로 만든다. 사실 CRA에서는 `components` 폴더까지 같이 만들어줘야 하지 않나 싶다.

리액트에서는 각 컴포넌트들을 개발해 합성해 더 큰 컴포넌트를 만들거나 페이지를 만들어내기 때문에
`components` 폴더에 개발하는 컴포넌트를 모아서 관리하게 된다.

```
- src/
-   assets/
-   components/
-     List/
-       index.js
-     Header/
-       index.js
-     Content/
-       index.js
-     Comment/
-       index.js
-   feature/
-     Message/
-       index.js
-     Payment/
-       index.js
-   pages/
-     Main/
-       index.js
-     Post/
-       index.js
-   store/
-     user/
-       index.js
-     post/
-       index.js
-   utils/
```

### 리액트의 상태 관리

#### props
최대한 적은 props을 넘김 (객체로 넘기거나 콜백은 하나만 넘김)

setState를 다루는 동작을 넘길 경우 setState만 넘기고 실제 구현은 props로 받은 callback에서 구현

#### state



#### context
context는 값을 넘겨서 관리할 곳들만 (전역으로는 사용 X) 예제랑 같이



## Reference

* [https://www.robinwieruch.de/react-folder-structure/])(https://www.robinwieruch.de/react-folder-structure/)
